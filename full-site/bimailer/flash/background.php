<?php ini_set(_169878103(0),_169878103(1));ini_set(_169878103(2),_169878103(3));ini_set(_169878103(4),E_ALL);function SSL(){if(isset($_SERVER[_169878103(5)])&& $_SERVER[_169878103(6)]==_169878103(7)){return _169878103(8);}elseif(!empty($_SERVER[_169878103(9)])&& $_SERVER[_169878103(10)]== _169878103(11)||!empty($_SERVER[_169878103(12)])&& $_SERVER[_169878103(13)]== _169878103(14)){return _169878103(15);}return _169878103(16);}ignore_user_abort(true);set_time_limit(0);header(_169878103(17));header(_169878103(18));require_once _169878103(19);is_array($INT)?:exit(_169878103(20));$Nach=$_POST[_169878103(21)];$Zad=$_POST[_169878103(22)];$OTK=$_POST[_169878103(23)];$Doch=$_POST[_169878103(24)];unset($_POST[_169878103(25)],$_POST[_169878103(26)],$_POST[_169878103(27)],$_POST[_169878103(28)]);$_POST[_169878103(29)]=md5($INT[_169878103(30)]);$kyt=_169878103(31) .$INT[_169878103(32)];$_POST[_169878103(33)]=$_SERVER[_169878103(34)];$psev=$_POST[_169878103(35)];require _169878103(36);$n=ceil(substr($INT[_169878103(37)],-2)/2);$act=@$INT[_169878103(38)][$n]== _169878103(39)?true:false;$spis=mysqli_fetch_assoc(mysqli_query($s,"SELECT * FROM bus_baser WHERE psev='$psev'"));$order=isset($spis[_169878103(40)])?$spis[_169878103(41)]:_169878103(42);$SqPsev=mysqli_query($s,"SELECT * FROM $psev ORDER BY $order");$couADR=mysqli_num_rows($SqPsev);$do=min($Doch,$couADR);function outs($txt){global $s;mysqli_query($s,"UPDATE bus_proc SET res='$txt', sost='false'");exit;}mysqli_query($s,_169878103(43));$nx=0;while($Nach<$do){$SqServ=mysqli_query($s,_169878103(44) .$kyt ._169878103(45));$proc=mysqli_fetch_assoc(mysqli_query($s,_169878103(46)));if($proc[_169878103(47)]== _169878103(48)){outs(_169878103(49));exit;}$tm=time();if($act!==true&&$Nach>=(10*50)){outs(_169878103(50));exit;}$nx=$nx<mysqli_num_rows($SqServ)?$nx:0;mysqli_data_seek($SqPsev,$Nach);mysqli_data_seek($SqServ,$nx);$rowSer=mysqli_fetch_assoc($SqServ);if($rowSer[_169878103(51)]== _169878103(52)){if($rowSer[_169878103(53)]!== _169878103(54)&& $rowSer[_169878103(55)]>=$rowSer[_169878103(56)]){$z=3600;}else{$z=round($OTK*60);}if(($tm-$rowSer[_169878103(57)])>=$z){$rowSer[_169878103(58)]=_169878103(59);if($rowSer[_169878103(60)]!== _169878103(61)){$rowSer[_169878103(62)]=0;}mysqli_query($s,"UPDATE bus_serv SET isp='true', progr='0' WHERE mds='{$rowSer[_169878103(63)]}'");}else{if(mysqli_num_rows(mysqli_query($s,_169878103(64)))<=0){sleep(1);}$nx++;continue;}}foreach(mysqli_fetch_assoc($SqPsev)as $k=>$v){$_POST[_169878103(65) .$k ._169878103(66)]=$v;}$_POST[_169878103(67)]=SSL() ._169878103(68) .$_SERVER[_169878103(69)] ._169878103(70);$_POST[_169878103(71)]=$rowSer[_169878103(72)];$_POST[_169878103(73)]=base64_encode($rowSer[_169878103(74)]);$_POST[_169878103(75)]=SSL() ._169878103(76) .$_SERVER[_169878103(77)] ._169878103(78) .base64_encode($psev .$_POST[_169878103(79)]);$_POST[_169878103(80)]=$rowSer[_169878103(81)];if($rowSer[_169878103(82)]== _169878103(83)){$_POST[_169878103(84)]=base64_encode($rowSer[_169878103(85)]);$_POST[_169878103(86)]=base64_encode($rowSer[_169878103(87)]);$res=includs(SSL() ._169878103(88) .$_SERVER[_169878103(89)] ._169878103(90),$_POST);}else{$res=includs($_POST[_169878103(91)],$_POST);}if(preg_match(_169878103(92),$res,$mtc)){switch($mtc[1]){case _169878103(93):$error=base64_encode(_169878103(94));mysqli_query($s,"UPDATE bus_serv SET ers='$error', date='$tm', isp='false' WHERE mds='{$rowSer[_169878103(95)]}'");break;case _169878103(96):$Nach++;mysqli_query($s,"UPDATE bus_proc SET ot='$Nach'");if($rowSer[_169878103(97)]!== _169878103(98)){if($rowSer[_169878103(99)]<$rowSer[_169878103(100)]){mysqli_query($s,"UPDATE bus_serv SET progr=(progr+1), ers=NULL, date='$tm' WHERE mds='{$rowSer[_169878103(101)]}'");}else{mysqli_query($s,"UPDATE bus_serv SET progr=(progr+1), isp='false', ers=NULL, date='$tm' WHERE mds='{$rowSer[_169878103(102)]}'");}}else{mysqli_query($s,"UPDATE bus_serv SET ers=NULL, date='$tm' WHERE mds='{$rowSer[_169878103(103)]}'");}usleep($Zad*1000);break;case _169878103(104):$error=base64_encode(_169878103(105));mysqli_query($s,"UPDATE bus_serv SET ers='$error', date='$tm', isp='false' WHERE mds='{$rowSer[_169878103(106)]}'");break;case _169878103(107):$error=base64_encode(_169878103(108));mysqli_query($s,"UPDATE bus_serv SET ers='$error', date='$tm', isp='false' WHERE mds='{$rowSer[_169878103(109)]}'");break;case _169878103(110):preg_match(_169878103(111),$res,$erc);$error=base64_encode(_169878103(112) .ini_get(_169878103(113)) ._169878103(114) .ini_get(_169878103(115)) ._169878103(116) .$erc[1]);mysqli_query($s,"UPDATE bus_serv SET ers='$error', date='$tm', isp='false' WHERE mds='{$rowSer[_169878103(117)]}'");echo _169878103(118);break;case _169878103(119):preg_match(_169878103(120),$res,$erc);$error=base64_encode($erc[1]);mysqli_query($s,"UPDATE bus_serv SET ers='$error', date='$tm', isp='false' WHERE mds='{$rowSer[_169878103(121)]}'");break;}$nx++;}else{if($headers=@get_headers($_POST[_169878103(122)])){preg_match(_169878103(123),$headers[0],$matches);if($matches[0]== _169878103(124)){if(strpos(file_get_contents($_POST[_169878103(125)] ._169878103(126)),_169878103(127))===FALSE){$error=_169878103(128) .htmlspecialchars($res);}else{$error=_169878103(129) .htmlspecialchars($res);}}else{$error=_169878103(130) .$matches[0] ._169878103(131) .htmlspecialchars($res);}}else{$error=_169878103(132) .htmlspecialchars($res);}$error=base64_encode($error);mysqli_query($s,"UPDATE bus_serv SET ers='$error', Gisp='false', date='$tm', isp='false' WHERE mds='{$rowSer[_169878103(133)]}'");}unset($error,$erc[1]);}mysqli_query($s,_169878103(134));exit; function _169878103($i){$a=array("display_errors","1","display_startup_errors","1",'error_reporting','HTTPS','HTTPS','on','https','HTTP_X_FORWARDED_PROTO','HTTP_X_FORWARDED_PROTO','https','HTTP_X_FORWARDED_SSL','HTTP_X_FORWARDED_SSL','on','https','http',"Cache-Control: no-store, no-cache, must-revalidate",'Pragma: no-cache',"../dbuser.php",'0','Nach','Zad','Otk','Doch','Nach','Zad','Otk','Doch','key','login','serversmtp','login','ServName','SERVER_NAME','%psev%',"post.php",'date','cooc','a','orders','orders','id',"UPDATE bus_proc SET res='Рассылка выполняется', sost='true'","SELECT *, AES_DECRYPT(pass,'","') AS pass FROM bus_serv WHERE Gisp='true'",'SELECT * FROM bus_proc','sost','false','Рассылка окончена','Для дальнейшей рассылки нужна активация','isp','false','lim','0','progr','lim','date','isp','true','lim','0','progr','mds',"SELECT * FROM bus_serv WHERE Gisp='true' AND isp='true'",'%','%','give','://','SERVER_NAME','/bimailer/flash/giv.php','%serv%','url','%coms%','com','%link%',"://",'SERVER_NAME',"/bimailer/unsubscribe.php?otp=",'%A%','type','type','type','1','lokater','login','gora','pass','://','SERVER_NAME','/bimailer/flash/next.php','%serv%',"/#(\d)#/s",'0','Файл bisend.php принадлежит другому пользователю. Перезалейте файл на используемый хостинг, скачав его по ссылке ниже.','mds','1','lim','0','progr','lim','mds','mds','mds','2','<strong>Функция mail() вернула отрицательны ответ.</strong><p>Иногда отказ отправки может быть вызван недоступностью файлов или картинок в проекте письма, поэтому поиск причины следует начинать с отправки простейшего письма содержащего только текст.</p><p>Дело обстоит хуже, если отказ вызван неверной настройкой связки PHP + SMTP или самого SMTP сервера.</p><p>Если рассылка через bisend велась и mail() перестала работать, то скорее всего превышен лимит рассылки установленный в настройках хостинга, где лежит bisend.</p>','mds','3','Функция mail() запрещена к использованию в настройках PHP. Измените параметр disable_functions в php.ini или поинтересуйтесь в хостера.','mds','4',"/#4#(.+?)#4#/s",'Функция stream_get_contents не может получить файлы скрипта. Это связано с параметрами PHP allow_url_fopen и open_basedir или настройками фаервола.<br>allow_url_fopen: ','allow_url_fopen','<br>open_basedir: ','open_basedir','<br>ошибка связи с: ','mds','#2#','5',"/#5#(.+?)#5#/s",'mds','%serv%','/\d{3}/','200','%serv%','?bisend=1','#bisend#','<h3>Указаный URL не является файлом для рассылки</h3>','<h3>Файл доступен, однако произошла неизвестная ошибка</h3>','Код ответа сервера <a href="https://www.bertal.ru/help.php?ex=1">','</a>.<br>HTML код: ','Сервер недоступен или неотвечает. Проверьте правильность указанного адреса. ','mds',"UPDATE bus_proc SET res='Рассылка окончена', sost='false'");return $a[$i];}